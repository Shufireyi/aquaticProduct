<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title></title>
		<link rel="stylesheet" href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">  
		<script src="http://cdn.static.runoob.com/libs/jquery/2.1.1/jquery.min.js"></script>
		<script src="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<script type="text/javascript" src="js/jquery-3.1.1.min.js" ></script>
		<style type="text/css">
			.pagination{float: right;}
		</style>
	</head>
	<body>
		<table class="table table-hover">
			<caption>数据展示</caption>
			<thead>
				<tr>
					<th>公司id</th>
					<th>工厂id</th>
					<th>传感器</th>
					<th>传感器类型</th>
					<th>value</th>
					<th>时间</th>
				</tr>
			</thead>
			<tbody id="tb">
				<tr>
					<td>Tanmay</td>
					<td>Bangalore</td>
					<td>560001</td>
					<td>560001</td>
					<td>560001</td>
					<td>560001</td>
				</tr>
			</tbody>
		</table>		
		<ul class="pagination" id="pagination">
		    <li><a onclick="listPagel()">&laquo;</a></li>
		    <li><a onclick="listPage1(1)">1</a></li>
		    <li><a onclick="listPage2(2)">2</a></li>
		    <li><a onclick="listPage3(3)">3</a></li>
		    <li><a onclick="listPage4(4)">4</a></li>
		    <li><a onclick="listPage5(5)">5</a></li>
		    <li><a onclick="listPager()">&raquo;</a></li>
		</ul>
	</body>
	<script>

		var nowpage = 1;
		var n=0;
		var totalpage = 30;
		var ul = document.getElementById("pagination");
		ul.children[1].children[0].style.backgroundColor = " #ddd";    //默认显示第一页

		list(1);
        alert("1");
		function list(page){
			$.ajax({
				type:"post",
				url:"/dataDisplay/queryHistoryDataByPage.action",
				data:{
					currentPage:page			
				},
				success:function(returnValue){
                    alert("1");

                    var obj = returnValue;
					$.each(obj, function(index,item) {
						var tbody = document.getElementById("tb");
						var tr = document.createElement("tr");
						tbody.appendChild(tr);
						alert(item);

						addtd(item.list.companyid,tr);
						addtd(item.list.factoryid,tr);
						addtd(item.list.sensorid,tr);
						addtd(item.list.type,tr);
						addtd(item.list.value,tr);
						addtd(getDateTime(item.list.time),tr);
						totalpage = item.page.totalPage;
						
					});
				}
			});
		}
		
		function addtd(obj,tr){
			var td = document.createElement("td");
			td.innerHTML = obj;
			tr.appendChild(td);
		}
		
		function getDateTime(date) {
			    var year = date.getFullYear();
			    var month = date.getMonth() + 1;
			    var day = date.getDate();
		        var hh = date.getHours();
			    var mm = date.getMinutes();
			    var ss = date.getSeconds();
			    return year + "-" + month + "-" + day+" "+hh+":"+mm+":"+ss; 
		}

		function listPage1(page){
			if(page > 0){
			var ul = document.getElementById("pagination");
			$('#tb tr').remove();
			for(var i=1;i<6;i++){
				ul.children[i].children[0].style.backgroundColor = "white"; 
			}
			if(document.getElementById("pagination").children[1].children[0].innerHTML == 1){
			ul.children[1].children[0].style.backgroundColor = " #ddd"; 
				
			}else{
			ul.children[2].children[0].style.backgroundColor = " #ddd"; }
			if(page != 1){
				for(var i=1;i<6;i++){
					ul.children[i].children[0].setAttribute("onclick","listPage"+i+"("+(page+i-2)+")");
					ul.children[i].children[0].innerHTML = page+i-2;
				}
			}
			nowpage = page;
			n = 2;
			}
			list(page);
		}
		function listPage2(page){
			var ul = document.getElementById("pagination");
			$('#tb tr').remove();
			for(var i=1;i<6;i++){
				ul.children[i].children[0].style.backgroundColor = "white"; 
			}
			ul.children[2].children[0].style.backgroundColor = " #ddd"; 
			nowpage = page;
			n = 2;
			list(page);
		}
		function listPage3(page){
			var ul = document.getElementById("pagination");
			$('#tb tr').remove();
			for(var i=1;i<6;i++){
				ul.children[i].children[0].style.backgroundColor = "white"; 
			}
			
			ul.children[3].children[0].style.backgroundColor = " #ddd"; 			
			nowpage = page;
			n=3;
			list(page);
		}
		function listPage4(page){
			var ul = document.getElementById("pagination");
			$('#tb tr').remove();
			for(var i=1;i<6;i++){
				ul.children[i].children[0].style.backgroundColor = "white"; 
			}
			
			ul.children[4].children[0].style.backgroundColor = " #ddd";
			nowpage = page;
			n=4;
			list(page);
		}
		function listPage5(page){
			if(page <= totalpage){
			var ul = document.getElementById("pagination");
			$('#tb tr').remove();
			for(var i=1;i<6;i++){
				ul.children[i].children[0].style.backgroundColor = "white"; 
			}
			
			if(document.getElementById("pagination").children[5].children[0].innerHTML == totalpage){
				ul.children[5].children[0].style.backgroundColor = " #ddd"; 
			}else{
			ul.children[4].children[0].style.backgroundColor = " #ddd"; }			
			if(nowpage < totalpage){
				for(var i=1;i<6;i++){
					ul.children[i].children[0].setAttribute("onclick","listPage"+i+"("+(page+i-4)+")");
					ul.children[i].children[0].innerHTML = page+i-4;
				}
			}
			nowpage = page;
			n = 4;
			list(page);
			}
		}
		
		function listPagel(){
			//alert(n);
			if( n == 1){
				listPage1(nowpage-1);
			}else if ( n == 2){
				listPage1(nowpage-1);
			}else if( n == 3){
				listPage2(nowpage-1);
			}else if( n == 4){
				listPage3(nowpage-1);				
			}else if (n == 5){
				listPage3(nowpage-1);				
			}else{
				
			}
			
		}
		function listPager(){
			if( n == 1){
				listPage2(nowpage+1);
			}else if ( n == 2){
				listPage3(nowpage+1);
			}else if( n == 3){
				listPage4(nowpage+1);
			}else if( n == 4){
				listPage5(nowpage+1);				
			}else if (n == 5){
				listPage5(nowpage+1);				
			}else{
				
			}			
		}
		
		
	</script>
</html>
